!function(a,b,c){"use strict";var d="jollyany_package_"+Math.random().toString(36).substring(7),e=a("<div/>",{class:"progress"}),f=a("<div/>",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",style:"width: 0%"}),g=a("<div/>",{class:"text-muted"});e.append(f);var h=function(){f.attr("aria-valuenow",0).css("width","0%"),f.addClass("progress-bar-animated").addClass("progress-bar-striped")},i=function(b,c,d){a.ajax({url:"index.php?t="+Math.random().toString(36).substring(7),type:"POST",data:b,beforeSend:function(){g.html('<i class="far fa-compass fa-spin"></i> Downloading Package...')},success:function(a){"success"==a.status?(f.attr("aria-valuenow",100*b.step/a.pathcount).css("width",100*b.step/a.pathcount+"%"),a.pathcount<=b.step?(g.text("Package download completed!"),b.archive=a.archive,b.jollyany="unzip_package",j(b,c,d)):(b.step++,i(b,c,d))):d.find(".dialogDebug").text(a.message)}})},j=function(c,d,e){a.ajax({url:"index.php?t="+Math.random().toString(36).substring(7),type:"POST",data:c,beforeSend:function(){g.html('<i class="far fa-compass fa-spin"></i> Unzip Package...')},success:function(f){"success"==f.status?(g.text("Package unzip completed!"),c.package=f.package,0==c["demo-data-package"]?(c.jollyany="install_package",h(),l(c,d,e,0,a.parseJSON(f.data))):(g.html('<i class="far fa-compass fa-spin"></i> Redirect to install page...'),b.onbeforeunload=null,b.location.href=f.url_root)):e.find(".dialogDebug").text(f.message)}})},k=function(b,c,d){a.ajax({url:"index.php?t="+Math.random().toString(36).substring(7),type:"POST",data:b,beforeSend:function(){g.html('<i class="far fa-compass fa-spin"></i> Get package data...')},success:function(e){"success"==e.status?(b.jollyany="install_package",l(b,c,d,0,a.parseJSON(e.data))):d.find(".dialogDebug").text(e.message)}})},l=function(b,c,d,e,h){if(e<h.extensions.length){var i=h.extensions[e];b.extension=JSON.stringify(i),a.ajax({url:"index.php?t="+Math.random().toString(36).substring(7),type:"POST",data:b,beforeSend:function(){g.html('<i class="far fa-compass fa-spin"></i> Installing: '+i.name+"...")},success:function(a){"success"==a.status?(f.attr("aria-valuenow",100*(e+1)/h.extensions.length).css("width",100*(e+1)/h.extensions.length+"%"),g.html('<i class="far fa-smile"></i> '+i.name+" installed!"),l(b,c,d,e+1,h)):d.find(".dialogDebug").append("<br />+"+a.message)}})}else c.find("i").remove(),c.removeAttr("disabled",""),f.removeClass("progress-bar-animated").removeClass("progress-bar-striped"),g.html('<i class="far fa-smile"></i> All extensions has installed!')};a(document).ready(function(){var c,f,j=null,l=a("#jollyany-theme-activate"),m=a("#jollyany-form-data-json");if(m.length)try{j=JSON.parse(m.html()),m.html("")}catch(b){}if(null!=j){var n=a("<html>"),o=a("<head>"),p=a("<body>");n.append(o).append(p);var q=a("<link>").attr({rel:"stylesheet",href:j.api+"/components/com_tz_envato_license/css/style.css"});o.append(q),o.append("<title>Jollyany &ndash; Product Activation</title>");var r=a('<form style="display:none;">').attr({action:j.api+"/index.php?option=com_tz_envato_license&view=activation",method:"POST",enctype:"multipart/form-data",id:"jollyany-activate-product-form",acceptCharset:"ISO-8859-1"}).append('<div class="jollyany-activation-loading"><div class="jollyany-activation-loading-content"><h2>Please wait&hellip;</h2><p>You will be redirected to Envato website in few seconds</p></div></div>');for(var s in j)a("<input>").attr({type:"hidden",name:s,value:j[s]}).appendTo(r);p.append(r);var t=function(){var a=b.navigator.userAgent,c=a.indexOf("MSIE ");if(c>0)return parseInt(a.substring(c+5,a.indexOf(".",c)),10);if(a.indexOf("Trident/")>0){var d=a.indexOf("rv:");return parseInt(a.substring(d+3,a.indexOf(".",d)),10)}var e=a.indexOf("Edge/");return e>0&&parseInt(a.substring(e+5,a.indexOf(".",e)),10)}();t&&(r.attr("target","jollyanyProductActivationWindow"),r.appendTo(a(document.body))),l.on("click",function(d){d.preventDefault();var e=n.clone(),g=e.find("form"),h=t?550:350,i=screen.width/2-300,j=screen.height/2-h/2;c=b.open("","jollyanyProductActivationWindow","width=600, height="+h+", top="+j+", left="+i),t?r.submit():a(c.document.body).append(e),c?t||e.find("link").on("load",function(){g.show(),setTimeout(function(){h=800,c.resizeTo(600,h),c.moveBy(0,-200),g.submit()},1100)}):alert("Your browser is blocking popups, activation process cannot continue!"),b.clearInterval(f),f=setInterval(function(){if(t)try{c.parent}catch(c){b.clearInterval(f),b.location.reload()}else c.parent||(b.clearInterval(f),b.location.reload())},300)})}if(a(".delete-template-activation").on("click",function(c){var d=a(this).data("token"),e=a(this);if(confirm("Are you sure you want to delete template activation?")){var f={};return f[d]=1,f.jollyany="deactivate",f.option="com_ajax",a.ajax({url:"index.php?t="+Math.random().toString(36).substring(7),type:"POST",data:f,beforeSend:function(){e.find("i").addClass("fa-spin")},success:function(a){e.find("i").removeClass("fa-spin"),"success"==a.status?b.location.reload():e.appendText(JSON.stringify(a))}}),1}}),a("#astroid-form-fieldset-section-jollyanyimport .astroid-form-fieldset-section").length){var u=a("#astroid-form-fieldset-section-jollyanyimport .astroid-form-fieldset-section"),v=a("#install-package-dialog");u.find("*[class^='col-sm-']").attr("class","col-12 col-sm-12"),a(".intall-package").on("click",function(b){b.preventDefault();var c=a(this);0==c.data("status")?alert("You need activate your license to use this premium feature!"):(v.find(".package-name").text(c.data("name")),v.find(".install-action").attr("data-file",a(this).data("file")),v.modal("show"))}),a(".install-action").on("click",function(b){var c={},f=a(this);if(c[f.data("token")]=1,c.option="com_ajax",c["extension-package"]=1,c["demo-data-package"]=0,c.file_name=d,c.step=1,c.install_code=f.data("file"),a("#demo-data-package:checked").length){if(!confirm("Your current data will be lost and overwritten by new content. Are you sure?"))return 1;c["demo-data-package"]=1,c.jollyany="download_package",f.attr("disabled","disabled"),f.prepend('<i class="fas fa-spinner fa-pulse"></i>'),v.find(".dialogDebug").html(""),h(),v.find(".dialogDebug").append(e).append(g),g.text('<i class="far fa-compass fa-spin"></i> Preparing to download package...'),i(c,f,v)}else c.jollyany="get_package_data",f.attr("disabled","disabled"),f.prepend('<i class="fas fa-spinner fa-pulse"></i>'),v.find(".dialogDebug").html(""),h(),v.find(".dialogDebug").append(e).append(g),g.text('<i class="far fa-compass fa-spin"></i> Preparing to download package...'),k(c,f,v);return 1}),v.on("hidden.bs.modal",function(b){a(this).find(".install-action").attr("data-file",""),a(this).find(".dialogDebug").html(""),a(this).find("#demo-data-package").prop("checked",!1)})}})}(jQuery,window);